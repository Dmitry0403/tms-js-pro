## Интеграция с бекендом
0. установить miragejs и импортировать файл с сервером [server.js](https://github.com/fetchMachine/tms-js-pro/blob/main/hms/misc/server_shop.js) в src/index
1. Создать класс, ответственный за коммуникацию с бекендом в src/api/Api. Класс должен содержать методы получения данных для каждого ендпоинта (делать fetch запрос, проверять на ok, делать, вызывать .json() и при необходимости трансформировать данные из структуры что отдал бекенд в удобную для вас структуру). Также тут создаем все интерфейсы и наши методы должны возвращать не any, а типизированные объекты
```javascript
interface Good {
    id: string;
    label: string;
    // ...
}
class Api {
    getGoods(): Promise<{ items: Good[]; total: number }> {
        return fetch('/api/goods').then(r => {
            if (r.ok) {
                return r.json()
            }
        });
    }
}
```

2. Создать отдельный слайс в сторе для корзины используя combineReducer.

3. Создать компонент HEADER.  1) Должен отображаться на всех роутах (Footer тоже, если еще не) 2) Должен иметь логотип ссылку на главную страницу "/" 3) Должен иметь инпут, пока без какой-либо логики 4) Должен иметь корзину (кнопку или картинку), которая при наличии товаров в ней должна отобразить бейдж с кол-вом товаров (Используем гет запрос по урлу "api/cart" на маутинге компонента, чтобы получить и положить корзину в стору).

4. Используя redux-thunk связать меню с беком. Удалить существующие моки категория для меню, на маунтинге меню (использовать useEffect) запросить данные с бека (```fetch('/api/categories')```), использовать статусы загрузки, чтобы отображать лоадер на время загрузки / сообщение об ошибке, если запрос провалился.
5. Используя redux-thunk связать с беком популярные категории (на маутинге страницы популярных категорий делать гет запрос по урлу "api/popular_categories")
6. Связать страницу категории, используя redux-thunk, делаем два гет запроса: получаем категорию гет запросом "/api/categories?ids=ID_КАТЕГОРИИ" и товары этой категории гет запросом "/api/goods?categoryTypeIds=ID_КАТЕГОРИИ". Для выполнения двух запросов параллельно в идеале использовать [Promise.all](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Promise/all)
7. Связать страницу продукта, используя redux-thunk и гет запрос "/api/goods?ids=ID_ПРОДУКТА"
8. Удалить все моки из проекта (продукты / категории), теперь у нас все приходит с бека.
9. На странице продукта сделать кнопку добавления / удаления продукта в корзину (используя redux-thunk). Если продукта нет в корзине - добавляем (делаем put запрос по урлу "api/cart", в body передаем весь продукт), если товар уже в корзине - удаляем (делаем delete запрос по урлу "api/cart", в body передаем весь продукт). После добавления / удаления товара должен обновляться счетчик товаров корзины (для этого в случае успешного добавления / удаления снова перепрашиваем корзину). На время запроса к беку кнопку задизейблить

## Misc
```typescript
// пример лоадстатусов
export enum LOAD_STATUSES = {
    UNKNOWN = 'unknown',
    LOADING = 'loading',
    LOADED = 'loaded',
    ERROR = 'error',
}
```

```typescript
// пример useEffect аналога метода componentDidMount
useEffect(() => {
    dispatch(someAction);
}, [])
```
